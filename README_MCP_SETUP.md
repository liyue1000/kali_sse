# Kali SSE MCP æœåŠ¡å™¨è®¾ç½®å®Œæˆ

## ğŸ‰ è®¾ç½®çŠ¶æ€ï¼šå®Œæˆ

æ™ºèƒ½åŒ–çš„Kali Linuxå‘½ä»¤æ‰§è¡Œå™¨å·²æˆåŠŸé…ç½®ä¸ºç¬¦åˆMCPåè®®æ ‡å‡†çš„æœåŠ¡å™¨ï¼Œå¯ä»¥ä¸Cursorç¼–è¾‘å™¨æ— ç¼é›†æˆã€‚

## ğŸ“‹ å·²å®Œæˆçš„ç»„ä»¶

### æ ¸å¿ƒåŠŸèƒ½
- âœ… **å‘½ä»¤æ‰§è¡Œå¼•æ“** - å®‰å…¨çš„å‘½ä»¤æ‰§è¡Œå’Œç»“æœå¤„ç†
- âœ… **å®‰å…¨éªŒè¯å™¨** - å‘½ä»¤ç™½åå•å’Œå±é™©æ¨¡å¼æ£€æµ‹
- âœ… **è¯­æ³•æ£€æŸ¥å™¨** - æ™ºèƒ½å‘½ä»¤è¯­æ³•åˆ†æå’Œå»ºè®®
- âœ… **ä»»åŠ¡ç®¡ç†å™¨** - å¼‚æ­¥ä»»åŠ¡è°ƒåº¦å’ŒçŠ¶æ€è·Ÿè¸ª
- âœ… **ç»“æœæ ¼å¼åŒ–å™¨** - å¤šæ ¼å¼è¾“å‡ºæ”¯æŒ

### æ™ºèƒ½åŒ–ç‰¹æ€§
- âœ… **é”™è¯¯å­¦ä¹ å™¨** - ä»æ‰§è¡Œé”™è¯¯ä¸­å­¦ä¹ å¹¶æä¾›ä¿®å¤å»ºè®®
- âœ… **è¯­æ³•æ£€æŸ¥** - å®æ—¶å‘½ä»¤è¯­æ³•éªŒè¯å’Œä¼˜åŒ–å»ºè®®
- âœ… **å®‰å…¨é˜²æŠ¤** - æ³¨å…¥æ”»å‡»æ£€æµ‹å’Œå‘½ä»¤éªŒè¯

### åè®®æ”¯æŒ
- âœ… **MCP STDIOæœåŠ¡å™¨** - ç¬¦åˆMCP 2024-11-05åè®®æ ‡å‡†
- âœ… **MCP SSEç«¯ç‚¹** - åŸºäºSSEçš„å®æ—¶é€šä¿¡æ”¯æŒ
- âœ… **HTTP API** - RESTful APIæ¥å£
- âœ… **å®æ—¶äº‹ä»¶æµ** - SSEäº‹ä»¶æ¨é€

### å®‰å…¨ç‰¹æ€§
- âœ… **è®¿é—®æ§åˆ¶** - åŸºäºè§’è‰²çš„æƒé™ç®¡ç†
- âœ… **å®¡è®¡æ—¥å¿—** - å®Œæ•´çš„æ“ä½œå®¡è®¡è®°å½•
- âœ… **æ³¨å…¥æ£€æµ‹** - å¤šç§æ³¨å…¥æ”»å‡»é˜²æŠ¤

## ğŸ”§ é…ç½®æ–‡ä»¶

### Cursor MCP é…ç½®
```json
{
  "mcpServers": {
    "kali-sse-mcp": {
      "command": "python",
      "args": [
        "/home/kali/Desktop/pentest/pentestmcp/kali_sse/src/mcp_stdio_server.py"
      ],
      "cwd": "/home/kali/Desktop/pentest/pentestmcp/kali_sse",
      "env": {
        "PYTHONPATH": "/home/kali/Desktop/pentest/pentestmcp/kali_sse/src:/home/kali/Desktop/pentest/pentestmcp/kaliActuator/security_command_client/venv/lib/python3.11/site-packages"
      }
    }
  }
}
```

é…ç½®æ–‡ä»¶ä½ç½®ï¼š
- é¡¹ç›®çº§åˆ«ï¼š`/home/kali/Desktop/pentest/pentestmcp/.cursor/mcp.json`
- å…¨å±€çº§åˆ«ï¼š`/home/kali/.cursor/mcp.json`

## ğŸ› ï¸ å¯ç”¨å·¥å…·

### 1. execute_command
æ‰§è¡ŒKali Linuxå®‰å…¨å·¥å…·å‘½ä»¤
```json
{
  "name": "execute_command",
  "arguments": {
    "command": "nmap",
    "args": ["-sS", "-p", "1-1000", "192.168.1.1"],
    "options": {
      "timeout": 300,
      "async": true
    }
  }
}
```

### 2. validate_command
éªŒè¯å‘½ä»¤çš„å®‰å…¨æ€§å’Œè¯­æ³•
```json
{
  "name": "validate_command",
  "arguments": {
    "command": "nmap -sS 192.168.1.1"
  }
}
```

### 3. list_supported_tools
åˆ—å‡ºæ”¯æŒçš„å®‰å…¨å·¥å…·
```json
{
  "name": "list_supported_tools",
  "arguments": {}
}
```

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### 1. å¯åŠ¨æœåŠ¡å™¨
```bash
# HTTP API æœåŠ¡å™¨
cd /home/kali/Desktop/pentest/pentestmcp/kali_sse
python -m src serve --host 0.0.0.0 --port 8024

# MCP STDIO æœåŠ¡å™¨ï¼ˆç”±Cursorè‡ªåŠ¨å¯åŠ¨ï¼‰
python src/mcp_stdio_server.py
```

### 2. åœ¨Cursorä¸­ä½¿ç”¨
1. é‡å¯Cursorç¼–è¾‘å™¨
2. æ‰“å¼€é¡¹ç›®ï¼š`/home/kali/Desktop/pentest/pentestmcp`
3. æ£€æŸ¥è®¾ç½® â†’ Features â†’ Model Context Protocol
4. ç¡®è®¤`kali-sse-mcp`æ˜¾ç¤ºä¸ºå·²è¿æ¥
5. åœ¨Agentæ¨¡å¼ä¸‹ä½¿ç”¨è‡ªç„¶è¯­è¨€ï¼š
   - "execute echo hello world"
   - "run nmap scan on 192.168.1.1"
   - "validate this nmap command"
   - "list available security tools"

### 3. APIç«¯ç‚¹æµ‹è¯•
```bash
# å¥åº·æ£€æŸ¥
curl http://localhost:8024/health

# æ‰§è¡Œå‘½ä»¤
curl -X POST http://localhost:8024/api/v1/execute \
  -H "Content-Type: application/json" \
  -d '{"command": "echo", "args": ["Hello World"]}'

# éªŒè¯å‘½ä»¤
curl -X POST http://localhost:8024/api/v1/validate \
  -H "Content-Type: application/json" \
  -d '{"command": "nmap -sS 192.168.1.1"}'

# SSEè¿æ¥
curl -N http://localhost:8024/sse/connect
```

## ğŸ§ª æµ‹è¯•è„šæœ¬

### éªŒè¯è®¾ç½®
```bash
python verify_mcp_setup.py
```

### æµ‹è¯•MCPåè®®
```bash
python test_cursor_mcp.py
```

### åŠŸèƒ½æ¼”ç¤º
```bash
python examples/quick_start.py
```

## ğŸ“Š æ”¯æŒçš„å®‰å…¨å·¥å…·

- **nmap** - ç½‘ç»œæ‰«æå’Œç«¯å£å‘ç°
- **nikto** - WebæœåŠ¡å™¨æ¼æ´æ‰«æ
- **dirb** - Webç›®å½•å’Œæ–‡ä»¶æ‰«æ
- **echo** - åŸºç¡€å‘½ä»¤æµ‹è¯•

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **è¿æ¥å¤±è´¥**
   - æ£€æŸ¥Cursorç‰ˆæœ¬ï¼ˆéœ€è¦0.45.8+ï¼‰
   - éªŒè¯é…ç½®æ–‡ä»¶JSONæ ¼å¼
   - ç¡®è®¤Pythonè·¯å¾„å’Œä¾èµ–

2. **å·¥å…·ä¸å¯ç”¨**
   - æ£€æŸ¥Cursorçš„MCPæ—¥å¿—
   - éªŒè¯æœåŠ¡å™¨å¯åŠ¨çŠ¶æ€
   - ç¡®è®¤æƒé™é…ç½®

3. **å‘½ä»¤æ‰§è¡Œå¤±è´¥**
   - æ£€æŸ¥å‘½ä»¤ç™½åå•é…ç½®
   - éªŒè¯å®‰å…¨ç­–ç•¥è®¾ç½®
   - æŸ¥çœ‹å®¡è®¡æ—¥å¿—

### æ—¥å¿—ä½ç½®
- MCPæœåŠ¡å™¨æ—¥å¿—ï¼š`/tmp/mcp_server.log`
- åº”ç”¨æ—¥å¿—ï¼šæ§åˆ¶å°è¾“å‡º
- Cursor MCPæ—¥å¿—ï¼šCursorè®¾ç½®ä¸­çš„è¾“å‡ºé¢æ¿

## ğŸ“ˆ æ€§èƒ½ç‰¹æ€§

- **å¹¶å‘æ‰§è¡Œ** - æ”¯æŒå¤šä»»åŠ¡å¹¶è¡Œå¤„ç†
- **è¶…æ—¶æ§åˆ¶** - å¯é…ç½®çš„å‘½ä»¤æ‰§è¡Œè¶…æ—¶
- **èµ„æºç›‘æ§** - å®æ—¶ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µ
- **ç¼“å­˜ä¼˜åŒ–** - æ™ºèƒ½ç»“æœç¼“å­˜æœºåˆ¶

## ğŸ”’ å®‰å…¨ç‰¹æ€§

- **å‘½ä»¤ç™½åå•** - åªå…è®¸é¢„å®šä¹‰çš„å®‰å…¨å·¥å…·
- **æ³¨å…¥é˜²æŠ¤** - æ£€æµ‹å’Œé˜»æ­¢å„ç§æ³¨å…¥æ”»å‡»
- **æƒé™æ§åˆ¶** - åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶
- **å®¡è®¡è¿½è¸ª** - å®Œæ•´çš„æ“ä½œè®°å½•å’Œå®¡è®¡

## ğŸ¯ ä¸‹ä¸€æ­¥

1. **æ‰©å±•å·¥å…·æ”¯æŒ** - æ·»åŠ æ›´å¤šKali Linuxå·¥å…·
2. **å¢å¼ºæ™ºèƒ½åŒ–** - æ”¹è¿›é”™è¯¯å­¦ä¹ å’Œå»ºè®®ç³»ç»Ÿ
3. **ä¼˜åŒ–æ€§èƒ½** - æå‡å¤§è§„æ¨¡æ‰«æçš„å¤„ç†èƒ½åŠ›
4. **å¢å¼ºå®‰å…¨** - æ·»åŠ æ›´å¤šå®‰å…¨é˜²æŠ¤æœºåˆ¶

---

**çŠ¶æ€**: âœ… å®Œå…¨å¯ç”¨  
**ç‰ˆæœ¬**: 1.0.0  
**åè®®**: MCP 2024-11-05  
**æœ€åæ›´æ–°**: 2025-08-13
